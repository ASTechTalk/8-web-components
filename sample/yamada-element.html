<template>
    <style>
        button {
            display: block;
        }
        /* shadowRootの下にあるから、tempalateの外にも影響をおよぼさない */
        img {
            width: 20%;
        }
    </style>
    <img src="./img/picture.png" alt="picture">
    <button>click</button>
</template>

<script>
    // import元のdocumentを取得する
    var thisDocument = document.currentScript.ownerDocument;
    // templateタグからdomを取得
    var template = thisDocument.querySelector("template");
    // templateのクローンを生成(この時点では親ノードはnull)
    var clone = thisDocument.importNode(template.content, true);
    
    // divタグはimport元にあるのでdocumentから取得
    var div = document.querySelector("div");
    var shadowRoot = div.createShadowRoot();
    shadowRoot.appendChild(clone);

    // buttonにクリックイベントをつけてみる
    var buttons = shadowRoot.querySelectorAll("button");
    for(var i = 0; i < buttons.length; i++){
        buttons[i].addEventListener('click', function(event){
            alert('hello');
        });
    };
</script>
